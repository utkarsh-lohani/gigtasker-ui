<div class="task-wizard-container">
    <!-- Progress Header -->
    <div class="progress-header">
        <div class="step" [class.active]="currentStep === 1">1. Gig Info</div>
        <div class="bar"></div>
        <div class="step" [class.active]="currentStep === 2">2. Details</div>
        <div class="bar"></div>
        <div class="step" [class.active]="currentStep === 3">3. Budget</div>
    </div>

    <!-- STEP 1 -->
    @if (currentStep === 1) {
    <div class="wizard-card">
        <h2>What’s the gig?</h2>

        <form [formGroup]="step1Group">
            <mat-form-field appearance="outline" class="full-field">
                <mat-label>Task Title</mat-label>
                <input
                    matInput
                    formControlName="title"
                    required
                    placeholder="e.g. Fix laptop, assemble furniture…"
                />
            </mat-form-field>
        </form>

        <div class="actions">
            <button
                mat-flat-button
                color="primary"
                (click)="nextStep()"
                [disabled]="step1Group.invalid"
            >
                Continue
            </button>
        </div>
    </div>
    }

    <!-- STEP 2 -->
    @if (currentStep === 2) {
    <div class="wizard-card">
        <h2>Tell us more</h2>

        <form [formGroup]="step2Group">
            <mat-form-field appearance="outline" class="full-field">
                <mat-label>Description</mat-label>
                <textarea
                    matInput
                    formControlName="description"
                    rows="4"
                    placeholder="Explain the gig in detail…"
                ></textarea>
            </mat-form-field>
        </form>

        <div class="actions">
            <button mat-button (click)="prevStep()">Back</button>
            <button mat-flat-button color="primary" (click)="nextStep()">Continue</button>
        </div>
    </div>
    }

    <!-- STEP 3 -->
    @if (currentStep === 3) {
    <div class="wizard-card">
        <h2>Budget & Rules</h2>

        <form [formGroup]="step3Group">
            <div class="two-col">
                <mat-form-field appearance="outline">
                    <mat-label>Deadline</mat-label>
                    <input
                        matInput
                        [matDatepicker]="picker"
                        formControlName="deadline"
                        [min]="minDate"
                        required
                    />
                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>

                <mat-form-field appearance="outline">
                    <mat-label>Max bids per user</mat-label>
                    <input
                        matInput
                        type="number"
                        formControlName="maxBidsPerUser"
                        min="1"
                        max="10"
                    />
                </mat-form-field>
            </div>

            <div class="two-col">
                <mat-form-field appearance="outline">
                    <mat-label>Min Pay ($)</mat-label>
                    <span matTextPrefix>$&nbsp;</span>
                    <input matInput type="number" formControlName="minPay" />
                </mat-form-field>

                <mat-form-field appearance="outline">
                    <mat-label>Max Pay ($)</mat-label>
                    <span matTextPrefix>$&nbsp;</span>
                    <input matInput type="number" formControlName="maxPay" />
                </mat-form-field>
            </div>
        </form>

        <div class="actions">
            <button mat-button (click)="prevStep()">Back</button>
            <button mat-flat-button color="primary" (click)="saveTask()">Post Gig</button>
        </div>
    </div>
    }
</div>
